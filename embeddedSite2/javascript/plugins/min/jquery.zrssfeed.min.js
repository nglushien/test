!function(e){e.fn.rssfeed=function(a,r,i){var n={limit:10,offset:1,header:!0,titletag:"h4",date:!0,dateformat:"datetime",content:!0,snippet:!0,media:!0,showerror:!0,errormsg:"",key:null,ssl:!1,linktarget:"_blank",linkredirect:"",linkcontent:!1,sort:"",sortasc:!0,historical:!1},r=e.extend(n,r);return this.each(function(n,s){var l=e(s),o="";if(r.ssl&&(o="s"),l.hasClass("rssFeed")||l.addClass("rssFeed"),null==a)return!1;r.offset>0&&(r.offset-=1),r.limit+=r.offset;var c="http"+o+"://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&q="+encodeURIComponent(a);c+="&num="+r.limit,r.historical&&(c+="&scoring=h"),null!=r.key&&(c+="&key="+r.key),c+="&output=json_xml",e.getJSON(c,function(a){if(200==a.responseStatus)t(s,a.responseData,r),e.isFunction(i)&&i.call(this,l);else{if(r.showerror)if(""!=r.errormsg){r.errormsg}else{a.responseDetails}e(s).html('<div class="socialFeedMissingErrorMessage"><h2>Sorry</h2><p>Feed is temporarily unavailable.</p></div>')}})})};var t=function(t,i,n){var o=i.feed;if(!o)return!1;var c=[],d=0,f="",u="odd";if(n.media)var h=s(i.xmlString),g=h.getElementsByTagName("item");n.header&&(f+='<div class="rssHeader"><a target="_blank" href="'+o.link+'" title="'+o.description+'">'+o.title+"</a></div>"),f+='<div class="rssBody"><ul>';for(var m=n.offset;m<o.entries.length;m++){d=m-n.offset,c[d]=[];var v,p=o.entries[m],M="",k=p.link;switch(n.sort){case"title":M=p.title;break;case"date":M=p.publishedDate}if(c[d].sort=M,p.publishedDate){var b=new Date(p.publishedDate),v=b.toLocaleDateString()+" "+b.toLocaleTimeString();switch(n.dateformat){case"datetime":break;case"date":v=b.toLocaleDateString();break;case"time":v=b.toLocaleTimeString();break;case"timeline":v=l(b);break;default:v=r(b,n.dateformat)}}if(n.linkredirect&&(k=encodeURIComponent(k)),c[d].html="<"+n.titletag+'><a target="_blank" class="rssLink" href="'+n.linkredirect+k+'" title="View this feed at '+o.title+'">'+p.title+"</a></"+n.titletag+">",n.date&&v&&(c[d].html+="<div>"+v+"</div>"),n.content){if(n.snippet&&""!=p.contentSnippet)var w=p.contentSnippet;else var w=p.content;n.linkcontent&&(w='<a target="_blank" href="'+n.linkredirect+k+'" title="View this feed at '+o.title+'">'+w+"</a>"),c[d].html+="<p>"+w+"</p>"}if(n.media&&g.length>0){var y=g[m].getElementsByTagName("enclosure");if(y.length>0){c[d].html+='<div class="rssMedia"><div>Media files</div><ul>';for(var D=0;D<y.length;D++){var S=y[D].getAttribute("url"),x=y[D].getAttribute("type"),F=y[D].getAttribute("length");c[d].html+='<li><a target="_blank" href="'+S+'" title="Download this media">'+S.split("/").pop()+"</a> ("+x+", "+a(F)+")</li>"}c[d].html+="</ul></div>"}}}n.sort&&c.sort(function(e,t){if(n.sortasc)var a=e.sort,r=t.sort;else var a=t.sort,r=e.sort;return"date"==n.sort?new Date(a)-new Date(r):(a=a.toLowerCase(),r=r.toLowerCase(),r>a?-1:a>r?1:0)}),e.each(c,function(e){f+='<li class="rssRow '+u+'">'+c[e].html+"</li>",u="odd"==u?"even":"odd"}),f+="</ul></div>",e(t).html(f),e("a",t).attr("target",n.linktarget)},a=function(e){var t=["bytes","kb","MB","GB","TB","PB"],a=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(a))).toFixed(2)+" "+t[a]},r=function(e,t){var a=new Date(e);return e=t,e=e.replace("dd",i(a.getDate())),e=e.replace("MMMM",n(a.getMonth())),e=e.replace("MM",i(a.getMonth()+1)),e=e.replace("yyyy",a.getFullYear()),e=e.replace("hh",i(a.getHours())),e=e.replace("mm",i(a.getMinutes())),e=e.replace("ss",i(a.getSeconds()))},i=function(e){return e+="",e.length<2&&(e="0"+e),e},n=function(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return t[e]},s=function(e){var t,a=navigator.appName;return"Microsoft Internet Explorer"==a?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t},l=function(e){var t=new Date,a=new Date(e),r=Math.round((t.getTime()-a.getTime())/1e3);if(60>r)return"< 1 min";if(3600>r)var i=Math.round(r/60)-1,n="min";else if(86400>r)var i=Math.round(r/3600)-1,n="hour";else if(604800>r)var i=Math.round(r/86400)-1,n="day";else var i=Math.round(r/604800)-1,n="week";return i>1&&(n+="s"),i+" "+n}}(jQuery);